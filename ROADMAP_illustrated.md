# Markdown Illustrator æ¼”è¿›è·¯çº¿

<!-- å€™é€‰å›¾ï¼šä»2å¼ ä¸­é€‰æ‹©ç¬¬1å¼  -->

![å°é¢å›¾ - Markdown Illustrator æ¼”è¿›è·¯çº¿](output/images/0_cover_20260120_135354.png) â­



<!-- å…¶ä»–å€™é€‰å›¾å·²æ³¨é‡Š

<!-- å€™é€‰2: ![å°é¢å›¾ - Markdown Illustrator æ¼”è¿›è·¯çº¿](output/images/0_cover_20260120_135356_001.png) -->

-->

*æ–‡ç« å°é¢ï¼šMarkdown Illustrator æ¼”è¿›è·¯çº¿*

## é—®é¢˜èƒŒæ™¯

æ–‡ç”Ÿå›¾ç»“æœå¾ˆéš¾ä¸€æ¬¡æ»¡è¶³ç”¨æˆ·éœ€æ±‚ï¼Œé€šå¸¸éœ€è¦ï¼š

1. å¤šæ¬¡å°è¯•ï¼ˆåŒä¸€æç¤ºè¯ç”Ÿæˆä¸åŒç»“æœï¼‰
2. è°ƒæ•´æç¤ºè¯ï¼ˆæ ¹æ®åé¦ˆä¼˜åŒ–æè¿°ï¼‰
3. é€‰æ‹©æœ€ä½³ç»“æœï¼ˆä»å¤šä¸ªå€™é€‰ä¸­é€‰æ‹©ï¼‰

## æ¼”è¿›è·¯çº¿

---

## ğŸ¯ çŸ­æœŸç›®æ ‡ï¼ˆç«‹å³å¯åšï¼‰

**æ ¸å¿ƒåŸåˆ™**: åœ¨ç°æœ‰åŠŸèƒ½åŸºç¡€ä¸Šæ‰©å±•ï¼Œä¸ç ´åç°æœ‰æ¶æ„

### 1. æ‰¹é‡ç”Ÿæˆæ¨¡å¼

**åŠŸèƒ½**: ä¸ºæ¯ä¸ªé…å›¾ä½ç½®ç”Ÿæˆ N å¼ å€™é€‰å›¾

**ä½¿ç”¨æ–¹å¼**:

```
python src/main.py article.md --batch 3
# ä¸ºæ¯ä¸ªä½ç½®ç”Ÿæˆ 3 å¼ å€™é€‰å›¾
```

**è¾“å‡ºç»“æ„**:

```
output/
â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ 0_cover/
â”‚   â”‚   â”œâ”€â”€ 001.png  # å€™é€‰1
â”‚   â”‚   â”œâ”€â”€ 002.png  # å€™é€‰2
â”‚   â”‚   â””â”€â”€ 003.png  # å€™é€‰3
â”‚   â””â”€â”€ 1_section/
â”‚       â”œâ”€â”€ 001.png
â”‚       â”œâ”€â”€ 002.png
â”‚       â””â”€â”€ 003.png
```

**Markdown è¾“å‡º**:

```
# æ–‡ç« æ ‡é¢˜

<!-- å€™é€‰å›¾ï¼šä»3å¼ ä¸­é€‰æ‹©1å¼  -->
![å°é¢å›¾](output/images/0_cover/002.png) â­

<!-- å…¶ä»–å€™é€‰å›¾å·²æ³¨é‡Š
-->
```

**å®ç°è¦ç‚¹**:

- ä¿®æ”¹ `main.py` æ”¯æŒ `--batch` å‚æ•°
- ä¿®æ”¹ `image_gen.py` ç”Ÿæˆå™¨æ”¯æŒæ‰¹é‡è°ƒç”¨
- ä¿®æ”¹ `assembler.py` å¤„ç†å€™é€‰å›¾è¾“å‡º
- ä¿æŒå‘åå…¼å®¹ï¼ˆä¸æŒ‡å®š --batch æ—¶è¡Œä¸ºä¸å˜ï¼‰

---

### 2. å¢é‡æ›´æ–°æ¨¡å¼

**åŠŸèƒ½**: åªé‡æ–°ç”ŸæˆæŒ‡å®šçš„å›¾ç‰‡ï¼Œä¿ç•™å…¶ä»–å·²æ»¡æ„çš„å›¾ç‰‡

**ä½¿ç”¨æ–¹å¼**:

```
# é‡æ–°ç”Ÿæˆç¬¬ 2 å¼ å›¾ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰
python src/main.py article.md --regenerate 1

# é‡æ–°ç”Ÿæˆæ‰€æœ‰ section ç±»å‹çš„å›¾ç‰‡
python src/main.py article.md --regenerate-type section

# åªé‡æ–°ç”Ÿæˆå¤±è´¥çš„å›¾ç‰‡
python src/main.py article.md --regenerate-failed

# ä½¿ç”¨ä¸åŒçš„æç¤ºè¯é‡æ–°ç”Ÿæˆ
python src/main.py article.md --regenerate 0 --prompt "ç§‘æŠ€æ„Ÿï¼Œè“è‰²è°ƒ"
```

**å®ç°è¦ç‚¹**:

- è§£æç°æœ‰ Markdownï¼Œæå–å·²ç”Ÿæˆçš„å›¾ç‰‡ä¿¡æ¯
- æ”¯æŒæŒ‰ç´¢å¼•ã€ç±»å‹ã€çŠ¶æ€è¿‡æ»¤
- ä¿ç•™åŸå§‹æ–‡ä»¶çš„å¤‡ä»½æœºåˆ¶

---

### 3. å€™é€‰å›¾ç®¡ç†å·¥å…·

**åŠŸèƒ½**: æä¾›å‘½ä»¤è¡Œå·¥å…·ç®¡ç†å€™é€‰å›¾

**ä½¿ç”¨æ–¹å¼**:

```
# åˆ—å‡ºæ‰€æœ‰å€™é€‰å›¾
python src/main.py article.md --list-candidates

# é€‰æ‹©æŒ‡å®šå€™é€‰å›¾
python src/main.py article.md --select 0 2  # ç¬¬0ä½é€‰æ‹©å€™é€‰2

# æ¸…ç†æœªé€‰ä¸­çš„å€™é€‰å›¾
python src/main.py article.md --cleanup
```

---

## ğŸš€ ä¸­æœŸç›®æ ‡ï¼ˆéœ€è¦å¼€å‘ï¼‰

**æ ¸å¿ƒåŸåˆ™**: æå‡ç”¨æˆ·ä½“éªŒï¼Œé™ä½ä½¿ç”¨é—¨æ§›

### 1. Web äº¤äº’ç•Œé¢

**åŠŸèƒ½**: æä¾› Web ç•Œé¢ç”¨äºå›¾ç‰‡é¢„è§ˆå’Œé€‰æ‹©

**æŠ€æœ¯æ ˆ**:

- åç«¯ï¼šFlask / FastAPIï¼ˆè½»é‡çº§ï¼‰
- å‰ç«¯ï¼šåŸç”Ÿ HTML/JS + TailwindCSSï¼ˆæ— éœ€æ„å»ºï¼‰
- æœ¬åœ°è¿è¡Œï¼Œæ— éœ€æœåŠ¡å™¨

**ç•Œé¢è®¾è®¡**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Markdown Illustrator - å›¾ç‰‡é€‰æ‹©å™¨           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“„ article.md                              â”‚
â”‚                                             â”‚
â”‚  ä½ç½® 1: å°é¢å›¾ (cover)                      â”‚
â”‚  â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”                        â”‚
â”‚  â”‚ 1 â”‚ 2 â”‚ 3 â”‚   â”‚   â† é€‰æ‹©          â”‚
â”‚  â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜                        â”‚
â”‚  æç¤ºè¯: React Hooks æ·±å…¥ç†è§£...            â”‚
â”‚                                             â”‚
â”‚  ä½ç½® 2: ç« èŠ‚é…å›¾ (section)                  â”‚
â”‚  â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”                        â”‚
â”‚  â”‚ 1 â”‚ 2 â”‚ 3 â”‚   â”‚   â† é€‰æ‹©          â”‚
â”‚  â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜                        â”‚
â”‚  æç¤ºè¯: useEffect å®Œæ•´æŒ‡å—...               â”‚
â”‚                                             â”‚
â”‚  [ä¿å­˜é€‰æ‹©] [è·³è¿‡æ­¤ä½ç½®] [å…¨éƒ¨é€‰æ‹©æœ€ä½³]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å®ç°è¦ç‚¹**:

- æä¾›ç‹¬ç«‹çš„ `web_server.py` æ¨¡å—
- å¯åŠ¨æ—¶è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
- æ”¯æŒé”®ç›˜å¿«æ·é”®ï¼ˆ1/2/3 é€‰æ‹©ï¼Œç©ºæ ¼è·³è¿‡ï¼‰
- é€‰æ‹©åè‡ªåŠ¨æ›´æ–° Markdown æ–‡ä»¶

---

### 2. ç”¨æˆ·åå¥½è®°å½•

**åŠŸèƒ½**: è®°å½•ç”¨æˆ·çš„é€‰æ‹©ä¹ æƒ¯ï¼Œä¼˜åŒ–åç»­ç”Ÿæˆ

**è®°å½•å†…å®¹**:

```
# config/preferences.yaml
selections:
  cover:
    preferred_style: "minimal"
    preferred_colors: ["blue", "white"]
    disliked_keywords: ["cartoon", "3d"]
  section:
    preferred_style: "flat"
    preferred_diagram_types: ["flowchart", "sequence"]
```

**åº”ç”¨æ–¹å¼**:

```
# è‡ªåŠ¨è°ƒæ•´æç¤ºè¯
if user_preferences.get('cover', {}).get('preferred_style') == 'minimal':
    prompt += "ï¼Œminimalist style"
```

**å®ç°è¦ç‚¹**:

- æœ¬åœ° JSON æ–‡ä»¶å­˜å‚¨åå¥½
- è®°å½•æ¯æ¬¡é€‰æ‹©ï¼ˆå›¾ç‰‡ç±»å‹ã€é€‰ä¸­çš„å€™é€‰ã€æç¤ºè¯ï¼‰
- ä½¿ç”¨é¢‘ç‡ç»Ÿè®¡ä¼˜åŒ–é»˜è®¤æç¤ºè¯

---

### 3. æç¤ºè¯ A/B æµ‹è¯•

**åŠŸèƒ½**: å¯¹æ¯”ä¸åŒæç¤ºè¯æ•ˆæœï¼Œè‡ªåŠ¨é€‰æ‹©æœ€ä½³

**é…ç½®æ–¹å¼**:

```
# config/settings.yaml
ab_test:
  enabled: true
  test_size: 2  # æ¯ä¸ªä½ç½®ç”Ÿæˆ2ç§é£æ ¼çš„å¯¹æ¯”

  variations:
    - name: "minimal"
      prompt_template: "{title}ï¼Œæç®€é£æ ¼ï¼Œæ‰å¹³åŒ–"
    - name: "tech"
      prompt_template: "{title}ï¼Œç§‘æŠ€æ„Ÿï¼Œè“è‰²è°ƒ"
    - name: "artistic"
      prompt_template: "{title}ï¼Œæ‰‹ç»˜æ’ç”»ï¼ŒæŸ”å’Œè‰²å½©"
```

**è¾“å‡ºæ ¼å¼**:

```
# æ–‡ç« æ ‡é¢˜

<!-- A/B æµ‹è¯•ç»“æœ -->
![å°é¢å›¾-minimal](output/images/0_cover_minimal.png)
![å°é¢å›¾-tech](output/images/0_cover_tech.png)
```

**åç»­ä¼˜åŒ–**:

- ç”¨æˆ·é€‰æ‹©åè‡ªåŠ¨è®°å½•åå¥½
- ä¸‹æ¬¡è‡ªåŠ¨ä½¿ç”¨ç”¨æˆ·åå¥½çš„é£æ ¼

---

## ğŸŒŸ é•¿æœŸç›®æ ‡ï¼ˆå¤æ‚ï¼‰

**æ ¸å¿ƒåŸåˆ™**: æ™ºèƒ½åŒ–ã€è‡ªåŠ¨åŒ–ã€ä¸ªæ€§åŒ–

### 1. åŸºäºåé¦ˆçš„æç¤ºè¯ä¼˜åŒ–

**åŠŸèƒ½**: æ ¹æ®ç”¨æˆ·é€‰æ‹©è‡ªåŠ¨ä¼˜åŒ–æç¤ºè¯

**å·¥ä½œæµç¨‹**:

```
ç”¨æˆ·é€‰æ‹©å€™é€‰å›¾ â†’ è®°å½•é€‰æ‹©ç‰¹å¾ â†’ åˆ†ææ¨¡å¼ â†’ è‡ªåŠ¨è°ƒæ•´æç¤ºè¯
```

**å®ç°æ€è·¯**:

```
class FeedbackLearner:
    def analyze_selections(self, selections):
        """åˆ†æç”¨æˆ·é€‰æ‹©æ¨¡å¼"""
        # ç”¨æˆ·å–œæ¬¢ä»€ä¹ˆæ ·çš„å›¾ï¼Ÿ
        preferred_styles = self.extract_styles(selections)
        preferred_colors = self.extract_colors(selections)

        # ä¼˜åŒ–æç¤ºè¯æ¨¡æ¿
        self.update_prompt_template(preferred_styles)

    def suggest_improvement(self, prompt, rejected_images):
        """å»ºè®®æç¤ºè¯æ”¹è¿›"""
        # åˆ†æè¢«æ‹’ç»çš„å›¾ç‰‡æœ‰ä»€ä¹ˆå…±åŒç‚¹
        # å»ºè®®å¦‚ä½•ä¿®æ”¹æç¤ºè¯
        return {
            "add_keywords": ["minimal", "flat"],
            "remove_keywords": ["cartoon"],
            "style_adjustment": "more professional"
        }
```

**LLM è¾…åŠ©ä¼˜åŒ–**:

```
ç”¨æˆ·åé¦ˆ: "å¤ªå¡é€šäº†ï¼Œéœ€è¦æ›´ä¸“ä¸š"
      â†“
LLM åˆ†æ: å°† "æç®€é£æ ¼" æ”¹ä¸º "ä¸“ä¸šå•†åŠ¡é£æ ¼"ï¼Œç§»é™¤ "æŸ”å’Œè‰²å½©"
      â†“
é‡æ–°ç”Ÿæˆ: æ›´ç¬¦åˆç”¨æˆ·æœŸæœ›
```

---

### 2. æ™ºèƒ½å›¾ç‰‡ç¼–è¾‘

**åŠŸèƒ½**: æ”¯æŒå±€éƒ¨ä¿®æ”¹å›¾ç‰‡ï¼Œè€Œéå®Œå…¨é‡æ–°ç”Ÿæˆ

**ä½¿ç”¨åœºæ™¯**:

```
# åªä¿®æ”¹å›¾ç‰‡çš„æ–‡å­—éƒ¨åˆ†
python src/main.py article.md --edit 0 \
  --keep-layout \
  --change-text "API è®¤è¯æµç¨‹" â†’ "ç”¨æˆ·ç™»å½•æµç¨‹"

# è°ƒæ•´å›¾ç‰‡é£æ ¼
python src/main.py article.md --edit 0 \
  --change-style "minimal" â†’ "3d render"
```

**å®ç°æ–¹æ¡ˆ**:

1. ä½¿ç”¨æ”¯æŒç¼–è¾‘çš„ APIï¼ˆå¦‚ DALL-E 2 çš„ç¼–è¾‘åŠŸèƒ½ï¼‰
2. æˆ–ä½¿ç”¨å›¾åƒå¤„ç† + å±€éƒ¨é‡ç»˜

---

### 3. å¤šæ¨¡æ€ç†è§£

**åŠŸèƒ½**: åˆ†æç”¨æˆ·æ»¡æ„çš„å›¾ç‰‡ï¼Œæå–è§†è§‰ç‰¹å¾

**å·¥ä½œæµç¨‹**:

```
ç”¨æˆ·æ»¡æ„çš„å›¾ç‰‡ â†’ è§†è§‰åˆ†æ â†’ æå–ç‰¹å¾ â†’ ç”Ÿæˆæç¤ºè¯æ¨¡æ¿
      â†“              â†“            â†“           â†“
  good.png      é¢œè‰²/æ„å›¾/é£æ ¼   è“è‰²è°ƒ/æç®€   "ç§‘æŠ€æ„Ÿï¼Œè“è‰²è°ƒï¼Œæç®€é£æ ¼"
```

**å®ç°æ–¹å¼**:

```
class VisionAnalyzer:
    def analyze_image(self, image_path):
        """åˆ†æå›¾ç‰‡çš„è§†è§‰ç‰¹å¾"""
        # ä½¿ç”¨è§†è§‰ LLM åˆ†æ
        features = self.vision_llm.describe(image_path)

        return {
            "dominant_colors": ["#1E88E5", "#FFFFFF"],
            "style": "minimalist",
            "composition": "centered",
            "elements": ["icon", "text", "arrow"]
        }
```

---

## ğŸ“‹ å®æ–½è®¡åˆ’

### Phase 1: çŸ­æœŸåŠŸèƒ½ï¼ˆ1-2å‘¨ï¼‰

**ä¼˜å…ˆçº§**: é«˜

- [x] æ¼”è¿›è·¯çº¿è§„åˆ’
- [ ] æ‰¹é‡ç”Ÿæˆæ¨¡å¼ (`--batch N`)
- [ ] å¢é‡æ›´æ–°æ¨¡å¼ (`--regenerate`)
- [ ] å€™é€‰å›¾ç®¡ç†å·¥å…·

### Phase 2: ä¸­æœŸåŠŸèƒ½ï¼ˆ2-4å‘¨ï¼‰

**ä¼˜å…ˆçº§**: ä¸­

- [ ] Web äº¤äº’ç•Œé¢
- [ ] ç”¨æˆ·åå¥½è®°å½•
- [ ] æç¤ºè¯ A/B æµ‹è¯•

### Phase 3: é•¿æœŸåŠŸèƒ½ï¼ˆæŒç»­ä¼˜åŒ–ï¼‰

**ä¼˜å…ˆçº§**: ä½

- [ ] åŸºäºåé¦ˆçš„æç¤ºè¯ä¼˜åŒ–
- [ ] æ™ºèƒ½å›¾ç‰‡ç¼–è¾‘
- [ ] å¤šæ¨¡æ€ç†è§£

---

## ğŸ¯ ç«‹å³å¼€å§‹ï¼šçŸ­æœŸåŠŸèƒ½å®ç°

ç°åœ¨å¼€å§‹å®ç° Phase 1 çš„çŸ­æœŸåŠŸèƒ½ï¼Œä»æœ€å®ç”¨çš„ **æ‰¹é‡ç”Ÿæˆæ¨¡å¼** å¼€å§‹ã€‚